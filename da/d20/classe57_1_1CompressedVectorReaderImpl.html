<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=11" />
        <meta name="generator" content="Doxygen 1.9.4" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>FreeCAD: e57::CompressedVectorReaderImpl Class Reference</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <script type="text/javascript" src="../../jquery.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <!--<link href='//fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>-->
        <link rel="stylesheet" href="../../freecad.css">
        <script type="text/javascript" src="../../doxy-boot.js"></script>
        <link rel="shortcut icon" href="https://freecadweb.org/images/favicon.ico">
    </head>
    <body>
        <div class="wrapper">
            <ul class="navbar" role="navigation">
                <li>
                    <a href="https://freecadweb.org" title="FreeCAD">
                        <img class="logo" src="https://www.freecad.org/svg/logo-freecad.svg">
                    </a>
                </li>
                <li><a href="../../index.html" title="Index">Index</a></li>
                <li><a href="../../modules.html" title="Modules list">Modules</a></li>
                <li><a href="../../annotated.html" title="Annotated list">Classes</a></li>
            </ul>
            <div id="top" class="maincontents"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dc/d1c/namespacee57.html">e57</a></li><li class="navelem"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html">CompressedVectorReaderImpl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="../../d3/d95/classe57_1_1CompressedVectorReaderImpl-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">e57::CompressedVectorReaderImpl Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;CompressedVectorReaderImpl.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6894dfb2a799743e7019d83c7a960b34"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a6894dfb2a799743e7019d83c7a960b34">close</a> ()</td></tr>
<tr class="separator:a6894dfb2a799743e7019d83c7a960b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab87bf45ed4480f282308466eaeebad30"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../dd/d77/classe57_1_1CompressedVectorNodeImpl.html">CompressedVectorNodeImpl</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#ab87bf45ed4480f282308466eaeebad30">compressedVectorNode</a> () const</td></tr>
<tr class="separator:ab87bf45ed4480f282308466eaeebad30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6e0300e6c1e8a977f4e7975477e79c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a6e6e0300e6c1e8a977f4e7975477e79c">CompressedVectorReaderImpl</a> (std::shared_ptr&lt; <a class="el" href="../../dd/d77/classe57_1_1CompressedVectorNodeImpl.html">CompressedVectorNodeImpl</a> &gt; ni, std::vector&lt; <a class="el" href="../../d8/d2b/classe57_1_1SourceDestBuffer.html">SourceDestBuffer</a> &gt; &amp;dbufs)</td></tr>
<tr class="separator:a6e6e0300e6c1e8a977f4e7975477e79c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2067381364b5167014c4f809a99e1d95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/db9/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a2067381364b5167014c4f809a99e1d95">isOpen</a> () const</td></tr>
<tr class="separator:a2067381364b5167014c4f809a99e1d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13f6a6f8e376956c41fe9e481615856f"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a13f6a6f8e376956c41fe9e481615856f">read</a> ()</td></tr>
<tr class="separator:a13f6a6f8e376956c41fe9e481615856f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b74596c4931d2019ec0f7346c8b3c2"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a84b74596c4931d2019ec0f7346c8b3c2">read</a> (std::vector&lt; <a class="el" href="../../d8/d2b/classe57_1_1SourceDestBuffer.html">SourceDestBuffer</a> &gt; &amp;dbufs)</td></tr>
<tr class="separator:a84b74596c4931d2019ec0f7346c8b3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d19bb465fad11c0c50d441992d6fb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a84d19bb465fad11c0c50d441992d6fb1">seek</a> (uint64_t recordNumber)</td></tr>
<tr class="separator:a84d19bb465fad11c0c50d441992d6fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa356e3d833f932ba92c5f1e3bf2f6174"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#aa356e3d833f932ba92c5f1e3bf2f6174">~CompressedVectorReaderImpl</a> ()</td></tr>
<tr class="separator:aa356e3d833f932ba92c5f1e3bf2f6174"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6e6e0300e6c1e8a977f4e7975477e79c" name="a6e6e0300e6c1e8a977f4e7975477e79c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6e0300e6c1e8a977f4e7975477e79c">&#9670;&nbsp;</a></span>CompressedVectorReaderImpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">e57::CompressedVectorReaderImpl::CompressedVectorReaderImpl </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../dd/d77/classe57_1_1CompressedVectorNodeImpl.html">CompressedVectorNodeImpl</a> &gt;&#160;</td>
          <td class="paramname"><em>ni</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d8/d2b/classe57_1_1SourceDestBuffer.html">SourceDestBuffer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allow reading of a completed CompressedVector, whether file is being read or currently being written. ??? what other situations need checking for? ??? check if CV not yet written to? ??? file in error state?</p>
<p >Empty dbufs is an error</p>
<p >Get CompressedArray's prototype node (all array elements must match this type)</p>
<p >Check dbufs well formed (matches proto exactly)</p>
<p >For each dbuf, create an appropriate <a class="el" href="../../df/dba/classe57_1_1Decoder.html">Decoder</a> based on the cVector_ attributes</p>
<p >Calc which stream the given path belongs to. This depends on position of the node in the proto tree.</p>
<p >Get how many records are actually defined</p>
<p >Read CompressedVector section header</p>
<p >Pre-calc end of section, so can tell when we are out of packets.</p>
<p >Convert physical offset to first data packet to logical</p>
<p >Verify that packet given by dataPhysicalOffset is actually a data packet, init channels</p>
<p >Double check that have a data packet</p>
<p >Have good packet, initialize channels</p>
<p >Just before return (and can't throw) increment reader count ??? safer way to assure don't miss close?</p>
<p >If get here, the reader is open</p>

<p class="reference">References <a class="el" href="../../dc/d1c/namespacee57.html#aba3b1e13d7197f907ff255426ed0abb3a0323661165ed65819c03371d7a0cc827">e57::DATA_PACKET</a>, <a class="el" href="../../d5/da2/structe57_1_1CompressedVectorSectionHeader.html#a2f0cf30f4238793f8d857c3a36baf4df">e57::CompressedVectorSectionHeader::dataPhysicalOffset</a>, <a class="el" href="../../df/dba/classe57_1_1Decoder.html#a05bda829370ab735a29dd14f24a3cd95">e57::Decoder::DecoderFactory()</a>, <a class="el" href="../../dc/d1c/namespacee57.html#a77d3e5c151623b81b466776db16d94e4a5f263e4075beff11def59b785cbebf94">e57::E57_ERROR_BAD_API_ARGUMENT</a>, <a class="el" href="../../dc/d1c/namespacee57.html#a77d3e5c151623b81b466776db16d94e4a7693a77a246e119e073bd7a07c66a2c9">e57::E57_ERROR_BAD_CV_PACKET</a>, <a class="el" href="../../dc/d1c/namespacee57.html#a77d3e5c151623b81b466776db16d94e4a2f49dbf9fc7f598d8d9b87c8de95de12">e57::E57_ERROR_INTERNAL</a>, <a class="el" href="../../d5/dd4/classe57_1_1PacketReadCache.html#ae7c5d06657c0f485dddc0cb46d2ee7f8">e57::PacketReadCache::lock()</a>, <a class="el" href="../../da/d5b/classe57_1_1CheckedFile.html#ad53b0360d88e2bc31cac6dcbe5dcf7cfa27f6ab7ebdafa554330ae627e00bf734">e57::CheckedFile::Logical</a>, <a class="el" href="../../da/d5b/classe57_1_1CheckedFile.html#ad53b0360d88e2bc31cac6dcbe5dcf7cfacc650fffa8f9d6dde172f28323395ae8">e57::CheckedFile::Physical</a>, <a class="el" href="../../d5/da2/structe57_1_1CompressedVectorSectionHeader.html#a2efd46b52ed648ca256503d6e32e2f47">e57::CompressedVectorSectionHeader::sectionLogicalLength</a>, <a class="el" href="../../dc/d1c/namespacee57.html#ac51cd6698affda7bd6180e4ff19e2c99">e57::toString()</a>, and <a class="el" href="../../d5/da2/structe57_1_1CompressedVectorSectionHeader.html#a502f77f821a60e3518fe1d43ef98d2e4">e57::CompressedVectorSectionHeader::verify()</a>.</p>

</div>
</div>
<a id="aa356e3d833f932ba92c5f1e3bf2f6174" name="aa356e3d833f932ba92c5f1e3bf2f6174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa356e3d833f932ba92c5f1e3bf2f6174">&#9670;&nbsp;</a></span>~CompressedVectorReaderImpl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">e57::CompressedVectorReaderImpl::~CompressedVectorReaderImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >??? what if already closed?</p>

<p class="reference">References <a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a6894dfb2a799743e7019d83c7a960b34">close()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6894dfb2a799743e7019d83c7a960b34" name="a6894dfb2a799743e7019d83c7a960b34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6894dfb2a799743e7019d83c7a960b34">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void e57::CompressedVectorReaderImpl::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Before anything that can throw, decrement reader count</p>
<p >No error if reader not open</p>
<p >Destroy decoders</p>

<p class="reference">Referenced by <a class="el" href="../../d2/db9/classfemexamples_1_1examplesgui_1_1FemExamples.html#ade2cd979d737a9fa26b1e5f5ff8ebfcf">femexamples.examplesgui.FemExamples::reject()</a>, and <a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#aa356e3d833f932ba92c5f1e3bf2f6174">~CompressedVectorReaderImpl()</a>.</p>

</div>
</div>
<a id="ab87bf45ed4480f282308466eaeebad30" name="ab87bf45ed4480f282308466eaeebad30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab87bf45ed4480f282308466eaeebad30">&#9670;&nbsp;</a></span>compressedVectorNode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="../../dd/d77/classe57_1_1CompressedVectorNodeImpl.html">CompressedVectorNodeImpl</a> &gt; e57::CompressedVectorReaderImpl::compressedVectorNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2067381364b5167014c4f809a99e1d95" name="a2067381364b5167014c4f809a99e1d95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2067381364b5167014c4f809a99e1d95">&#9670;&nbsp;</a></span>isOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/db9/classbool.html">bool</a> e57::CompressedVectorReaderImpl::isOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >don't checkImageFileOpen(<b>FILE</b>, <b>LINE</b>, <b>FUNCTION</b>), or checkReaderOpen()</p>

</div>
</div>
<a id="a13f6a6f8e376956c41fe9e481615856f" name="a13f6a6f8e376956c41fe9e481615856f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f6a6f8e376956c41fe9e481615856f">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned e57::CompressedVectorReaderImpl::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Rewind all dbufs so start writing to them at beginning</p>
<p >Allow decoders to use data they already have in their queue to fill newly empty dbufs This helps to keep decoder input queues smaller, which reduces backtracking in the packet cache.</p>
<p >Loop until every dbuf is full or we have reached end of the binary section.</p>
<p >Find the earliest packet position for channels that are still hungry It's important to call inputProcess of the decoders before this call, so current hungriness level is reflected.</p>
<p >If nobody's hungry, we are done with the read</p>
<p >Feed packet to the hungry decoders</p>
<p >Verify that each channel produced the same number of records</p>
<p >Return number of records transferred to each dbuf.</p>

<p class="reference">References <a class="el" href="../../d4/d93/structe57_1_1DecodeChannel.html#a3a3d53be6f9c4a65558509b83d971fcc">e57::DecodeChannel::dbuf</a>, <a class="el" href="../../dc/d1c/namespacee57.html#a77d3e5c151623b81b466776db16d94e4a2f49dbf9fc7f598d8d9b87c8de95de12">e57::E57_ERROR_INTERNAL</a>, and <a class="el" href="../../dc/d1c/namespacee57.html#ac51cd6698affda7bd6180e4ff19e2c99">e57::toString()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a84b74596c4931d2019ec0f7346c8b3c2">read()</a>, <a class="el" href="../../d2/dbe/classgzip__utf8_1_1GzipFile.html#a17112c17fb6431a0d56b0108931c73e0">gzip_utf8.GzipFile::readline()</a>, and <a class="el" href="../../d2/dbe/classgzip__utf8_1_1GzipFile.html#ac5b53848e16b6ba800ed9ac8d3f737c3">gzip_utf8.GzipFile::seek()</a>.</p>

</div>
</div>
<a id="a84b74596c4931d2019ec0f7346c8b3c2" name="a84b74596c4931d2019ec0f7346c8b3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b74596c4931d2019ec0f7346c8b3c2">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned e57::CompressedVectorReaderImpl::read </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d8/d2b/classe57_1_1SourceDestBuffer.html">SourceDestBuffer</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>dbufs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >don't checkImageFileOpen(<b>FILE</b>, <b>LINE</b>, <b>FUNCTION</b>), <a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a13f6a6f8e376956c41fe9e481615856f">read()</a> will do it</p>
<p >Check compatible with current dbufs</p>

<p class="reference">References <a class="el" href="../../da/d20/classe57_1_1CompressedVectorReaderImpl.html#a13f6a6f8e376956c41fe9e481615856f">read()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dbe/classgzip__utf8_1_1GzipFile.html#a17112c17fb6431a0d56b0108931c73e0">gzip_utf8.GzipFile::readline()</a>, and <a class="el" href="../../d2/dbe/classgzip__utf8_1_1GzipFile.html#ac5b53848e16b6ba800ed9ac8d3f737c3">gzip_utf8.GzipFile::seek()</a>.</p>

</div>
</div>
<a id="a84d19bb465fad11c0c50d441992d6fb1" name="a84d19bb465fad11c0c50d441992d6fb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d19bb465fad11c0c50d441992d6fb1">&#9670;&nbsp;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void e57::CompressedVectorReaderImpl::seek </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>recordNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >!!! implement</p>

<p class="reference">References <a class="el" href="../../dc/d1c/namespacee57.html#a77d3e5c151623b81b466776db16d94e4a879e491e7e754a08866b7c52051b8916">e57::E57_ERROR_NOT_IMPLEMENTED</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>FreeCAD/src/3rdParty/libE57Format/src/CompressedVectorReaderImpl.h</li>
<li>FreeCAD/src/3rdParty/libE57Format/src/CompressedVectorReaderImpl.cpp</li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.4-->
</div>
<!-- start footer part -->
<hr /><address class="footer"><small>
  Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
  </small></address>
</body>
</html>
